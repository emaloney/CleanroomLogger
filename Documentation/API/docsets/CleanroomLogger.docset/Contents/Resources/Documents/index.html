<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CleanroomLogger  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="CleanroomLogger  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">CleanroomLogger Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/emaloney/CleanroomLogger"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">CleanroomLogger Reference</a>
        <img id="carat" src="img/carat.png" />
        CleanroomLogger  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BasicLogConfiguration.html">BasicLogConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ConcatenatingLogFormatter.html">ConcatenatingLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FieldBasedLogFormatter.html">FieldBasedLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FieldBasedLogFormatter/Field.html">– Field</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FileLogRecorder.html">FileLogRecorder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LogReceptacle.html">LogReceptacle</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LogRecorderBase.html">LogRecorderBase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ParsableLogFormatter.html">ParsableLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReadableLogFormatter.html">ReadableLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RotatingLogFileConfiguration.html">RotatingLogFileConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RotatingLogFileRecorder.html">RotatingLogFileRecorder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/StandardLogFormatter.html">StandardLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/StandardOutputLogRecorder.html">StandardOutputLogRecorder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/XcodeLogConfiguration.html">XcodeLogConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/XcodeLogFormatter.html">XcodeLogFormatter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/DelimiterStyle.html">DelimiterStyle</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LogSeverity.html">LogSeverity</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OSLogTypeTranslator.html">OSLogTypeTranslator</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SeverityStyle.html">SeverityStyle</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SeverityStyle/TextRepresentation.html">– TextRepresentation</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TimestampStyle.html">TimestampStyle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/LogConfiguration.html">LogConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/LogFilter.html">LogFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/LogFormatter.html">LogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/LogRecorder.html">LogRecorder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CallSiteLogFormatter.html">CallSiteLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CallingThreadLogFormatter.html">CallingThreadLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DelimiterLogFormatter.html">DelimiterLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LiteralLogFormatter.html">LiteralLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Log.html">Log</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LogChannel.html">LogChannel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LogEntry.html">LogEntry</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LogEntry/Payload.html">– Payload</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LogSeverityFilter.html">LogSeverityFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OSLogRecorder.html">OSLogRecorder</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PayloadLogFormatter.html">PayloadLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SeverityLogFormatter.html">SeverityLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StackFrameLogFormatter.html">StackFrameLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TimestampLogFormatter.html">TimestampLogFormatter</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#using-cleanroomlogger' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='using-cleanroomlogger'>Using CleanroomLogger</h2>

<p>The main public API for CleanroomLogger is provided by <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html"><code>Log</code></a>.</p>

<p><code>Log</code> maintains five static read-only <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html"><code>LogChannel</code></a> properties that correspond to one of five <em>severity levels</em> indicating the importance of messages sent through that channel. When sending a message, you would select a severity appropriate for that message, and use the corresponding channel:</p>

<ul>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log5errorGSqVS_10LogChannel_"><code>Log.error</code></a> — The highest severity; something has gone wrong and a fatal error may be imminent</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log7warningGSqVS_10LogChannel_"><code>Log.warning</code></a> — Something appears amiss and might bear looking into before a larger problem arises</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log4infoGSqVS_10LogChannel_"><code>Log.info</code></a> — Something notable happened, but it isn’t anything to worry about</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log5debugGSqVS_10LogChannel_"><code>Log.debug</code></a> — Used for debugging and diagnostic information (not intended for use in production code)</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log7verboseGSqVS_10LogChannel_"><code>Log.verbose</code></a> - The lowest severity; used for detailed or frequently occurring debugging and diagnostic information (not intended for use in production code)</li>
</ul>

<p>Each of these <code>LogChannel</code>s provide three functions to record log messages:</p>

<ul>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel5traceFS0_FT8functionSS8filePathSS8fileLineSi_T_"><code>trace()</code></a> — This function records a log message with program executing trace information including the filename, line number and name of the calling function.</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel7messageFS0_FTSS8functionSS8filePathSS8fileLineSi_T_"><code>message(String)</code></a> — This function records the log message passed to it.</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel5valueFS0_FTGSqP__8functionSS8filePathSS8fileLineSi_T_"><code>value(Any?)</code></a> — This function attempts to record a log message containing a string representation of the optional <code>Any</code> value passed to it.</li>
</ul>
<a href='#enabling-logging' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='enabling-logging'>Enabling logging</h3>

<p>By default, logging is disabled, meaning that none of the <code>Log</code>’s channels have been populated. As a result, they have <code>nil</code> values and any attempts to perform logging will silently fail.</p>

<p>It is the responsibility of the <em>application developer</em> to enable logging, which is done by calling the appropriate variant of the <code>Log.enable()</code> function.</p>

<blockquote>
<p>The reason we specifically say that the application developer is responsible for enabling logging is to give the developer the power to control the use of logging process-wide. As with any code that executes, there’s an expense to logging, and the application developer should get to decide how to handle the tradeoff between the utility of collecting logs and the expense of collecting them at a given level of detail.</p>

<p>CleanroomLogger is built to be used from within frameworks, shared libraries, etc., as well as at the application level. However, any code designed to be embedded in other applications <strong>must</strong> interact with CleanroomLogger via the <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html"><code>Log</code></a> API <strong>only</strong>.</p>

<p>We believe so strongly that the application developer should be in full control of logging policy application-wide, that we even provide a way to ensure that CleanroomLogger is <em>never</em> enabled. That way, if you need to include a third-party library that uses CleanroomLogger, you can decide to turn it off entirely, thereby ensuring that you pay no performance penalty for logging. Just call <code>Log.neverEnable()</code>.</p>
</blockquote>

<p>Ideally, logging is enabled at the first possible point in the application’s launch cycle. Otherwise, critical log messages may be missed during launch because the logger wasn’t yet initialized.</p>

<p>The best place to put the call to <code>Log.enable()</code> is at the first line of your app delegate’s <code>init()</code>.</p>

<p>If you’d rather not do that for some reason, the next best place to put it is in the <code>application(_:willFinishLaunchingWithOptions:)</code> function of your app delegate. You’ll notice that we’re specifically recommending the <code>will</code> function, not the typical <code>did</code>, because the former is called earlier in the application’s launch cycle.</p>

<blockquote>
<p><strong>Note:</strong> During the running lifetime of an application process, only the <em>first</em> call to <code>Log.enable()</code> function will have any effect. All subsequent calls are ignored silently.</p>
</blockquote>
<a href='#logging-examples' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='logging-examples'>Logging examples</h3>

<p>To record items in the log, simply select the appropriate channel and call the appropriate function.</p>

<p>Here are a few examples:</p>
<a href='#logging-an-arbitrary-text-message' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='logging-an-arbitrary-text-message'>Logging an arbitrary text message</h4>

<p>Let’s say your application just finished launching. This is a significant event, but it isn’t an error. You also might want to see this information in production app logs. Therefore, you decide the appropriate <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Enums/LogSeverity.html"><code>LogSeverity</code></a> is <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Enums/LogSeverity.html#/s:FO15CleanroomLogger11LogSeverity4InfoFMS0_S0_"><code>.Info</code></a> and you select the corresponding <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html"><code>LogChannel</code></a>, which is <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZvV15CleanroomLogger3Log4infoGSqVS_10LogChannel_"><code>Log.info</code></a>. Then, to log a message, just call the channel’s <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel7messageFS0_FTSS8functionSS8filePathSS8fileLineSi_T_"><code>message()</code></a> function:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="n">info</span><span class="p">?</span><span class="o">.</span><span class="nf">message</span><span class="p">(</span><span class="s">"The application has finished launching."</span><span class="p">)</span>
</code></pre>
<a href='#logging-a-trace-message' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='logging-a-trace-message'>Logging a trace message</h4>

<p>If you’re working on some code and you’re curious about the order of execution, you can sprinkle some <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel5traceFS0_FTSS8filePathSS8fileLineSi_T_"><code>trace()</code></a> calls around.</p>

<p>This function outputs the filename, line number and name of the calling function.</p>

<p>For example, if you put the following code on line 364 of a file called ModularTable.swift in a function with the signature <code>tableView(_:cellForRowAtIndexPath:)</code>:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">?</span><span class="o">.</span><span class="nf">trace</span><span class="p">()</span>
</code></pre>

<p>The following message would be logged when that line gets executed:</p>
<pre class="highlight plaintext"><code>ModularTable.swift:364 — tableView(_:cellForRowAtIndexPath:)
</code></pre>

<blockquote>
<p><strong>Note:</strong> Because trace information is typically not desired in production code, you would generally only perform tracing at the <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Enums/LogSeverity.html#/s:FO15CleanroomLogger11LogSeverity5DebugFMS0_S0_"><code>.Debug</code></a> or <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Enums/LogSeverity.html#/s:FO15CleanroomLogger11LogSeverity7VerboseFMS0_S0_"><code>.Verbose</code></a> severity levels.</p>
</blockquote>
<a href='#logging-an-arbitrary-value' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='logging-an-arbitrary-value'>Logging an arbitrary value</h4>

<p>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogChannel.html#/s:FV15CleanroomLogger10LogChannel5valueFS0_FTGSqP__8functionSS8filePathSS8fileLineSi_T_"><code>value()</code></a> function can be used for outputting information about a specific value. The function takes an argument of type <code>Any?</code> and is intended to accept any valid runtime value.</p>

<p>For example, you might want to output the <code>NSIndexPath</code> value passed to your <code>UITableViewDataSource</code>’s <code>tableView(_: cellForRowAtIndexPath:)</code> function:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="n">verbose</span><span class="p">?</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="n">indexPath</span><span class="p">)</span>
</code></pre>

<p>This would result in output looking like:</p>
<pre class="highlight plaintext"><code>&lt;NSIndexPath: 0xc0000000000180d6&gt; {length = 2, path = 3 - 3}
</code></pre>

<blockquote>
<p><strong>Note:</strong> Although every attempt is made to create a string representation of the value passed to the function, there is no guarantee that a given log implementation will support values of a given type.</p>
</blockquote>
<a href='#cleanroomlogger-in-depth' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='cleanroomlogger-in-depth'>CleanroomLogger In Depth</h3>

<p>This section delves into the particulars of configuring and customizing CleanroomLogger to suit your needs.</p>
<a href='#configuring-cleanroomlogger' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='configuring-cleanroomlogger'>Configuring CleanroomLogger</h4>

<p>CleanroomLogger is configured when one of the <code>Log.enable()</code> function variants is called. Configuration can occur at most once within the lifetime of the running process. And once set, the configuration can’t be changed; it’s immutable. (The rationale for this is <a href="https://github.com/emaloney/CleanroomLogger#enabling-logging">discussed here</a>.)</p>

<p>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogConfiguration.html"><code>LogConfiguration</code></a> protocol represents the mechanism by which CleanroomLogger can be configured. <code>LogConfiguration</code>s allow encapsulating related settings and behavior within a single entity, and CleanroomLogger can be configured with multiple <code>LogConfiguration</code> instances to allow combining behaviors.</p>

<p>Each <code>LogConfiguration</code> specifies:</p>

<ul>
<li>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogConfiguration.html#/s:vP15CleanroomLogger16LogConfiguration15minimumSeverityOS_11LogSeverity"><code>minimumSeverity</code></a>, a <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Enums/LogSeverity.html"><code>LogSeverity</code></a> value that determines which log entries get recorded. Any <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogEntry.html"><code>LogEntry</code></a> with a <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogEntry.html#/s:vV15CleanroomLogger8LogEntry8severityOS_11LogSeverity"><code>severity</code></a> less than the configuration&rsquo;s <code>mimimumSeverity</code> will not be passed along to any <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogRecorder.html"><code>LogRecorder</code></a>s specified by that configuration.</li>
<li>An array of <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogRecorder.html"><code>LogFilter</code></a>s. Each <code>LogFilter</code> is given a chance to cause a given log entry to be ignored.</li>
<li>A <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogConfiguration.html#/s:vP15CleanroomLogger16LogConfiguration15synchronousModeSb"><code>synchronousMode</code></a> property, which determines whether synchronous logging should be used when processing log entries for the given configuration. <em>This feature is intended to be used during debugging and is not recommended for production code.</em></li>
<li>Zero or more contained <code>LogConfiguration</code>s. For organizational purposes, each <code>LogConfiguration</code> can in turn contain additional <code>LogConfiguration</code>s. The hierarchy is not meaningful, however, and is flattened at configuration time.</li>
<li>An array of <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogRecorder.html"><code>LogRecorder</code></a>s that will be used to write log entries to the underlying logging facility. If a configuration has no <code>LogRecorder</code>s, it is assumed to be a container of other <code>LogConfiguration</code>s only, and is ignored when the configuration hierarchy is flattened.</li>
</ul>

<p>When CleanroomLogger receives a request to log something, zero or more <code>LogConfiguration</code>s are selected to handle the request:</p>

<ol>
<li>The <code>severity</code> of the incoming <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogEntry.html"><code>LogEntry</code></a> is compared against the <code>minimumSeverity</code> of each <code>LogConfiguration</code>. Any <code>LogConfiguration</code> whose <code>minimumSeverity</code> is equal to or less than the <code>severity</code> of the <code>LogEntry</code> is selected for further consideration.</li>
<li>The <code>LogEntry</code> is then passed sequentially to the <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogFilter.html#/s:FP15CleanroomLogger9LogFilter20shouldRecordLogEntryuRq_S0__Fq_FVS_8LogEntrySb"><code>shouldRecordLogEntry(_:)</code></a> function of each of the <code>LogConfiguration</code>’s <code>filters</code>. If any <code>LogFilter</code> returns <code>false</code>, the associated configuration will <em>not</em> be selected to record that log entry.</li>
</ol>
<a href='#xcodelogconfiguration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='xcodelogconfiguration'>XcodeLogConfiguration</h5>

<p>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/XcodeLogConfiguration.html"><code>XcodeLogConfiguration</code></a> is ideally suited for use during development and in production.</p>

<p>By default, this configuration writes log entries to the running process’s <code>stdout</code> stream (which appears within the Xcode console pane) as well as to the Apple System Log (ASL) facility.</p>

<p>The simplest way to enable CleanroomLogger using the <code>XcodeLogConfiguration</code> is by calling:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">()</span>
</code></pre>

<p>Thanks to the magic of default parameter values, this is equivalent to the following <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/Log.html#/s:ZFV15CleanroomLogger3Log6enableFMS0_FT15minimumSeverityOS_11LogSeverity9debugModeSb16verboseDebugModeSb14timestampStyleGSqOS_14TimestampStyle_13severityStyleGSqOS_13SeverityStyle_12showCallSiteSb17showCallingThreadSb7filtersGSaPS_9LogFilter___T_"><code>Log.enable()</code></a> call:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">(</span><span class="nv">minimumSeverity</span><span class="p">:</span> <span class="o">.</span><span class="kt">Info</span><span class="p">,</span>
                 <span class="nv">debugMode</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nv">verboseDebugMode</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nv">timestampStyle</span><span class="p">:</span> <span class="o">.</span><span class="kt">Default</span><span class="p">,</span>
             <span class="nv">severityStyle</span><span class="p">:</span> <span class="o">.</span><span class="kt">Xcode</span><span class="p">,</span>
              <span class="nv">showCallSite</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="nv">showCallingThread</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                   <span class="nv">filters</span><span class="p">:</span> <span class="p">[])</span>
</code></pre>

<p>This configures CleanroomLogger using an <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/XcodeLogConfiguration.html"><code>XcodeLogConfiguration</code></a> with <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/XcodeLogConfiguration.html#/s:FC15CleanroomLogger21XcodeLogConfigurationcFMS0_FT15minimumSeverityOS_11LogSeverity9debugModeSb16verboseDebugModeSb8logToASLSb14timestampStyleGSqOS_14TimestampStyle_13severityStyleGSqOS_13SeverityStyle_12showCallSiteSb17showCallingThreadSb12showSeveritySb7filtersGSaPS_9LogFilter___S0_">default settings</a>.</p>

<blockquote>
<p><strong>Note:</strong> If either <code>debugMode</code> or <code>verboseDebugMode</code> is <code>true</code>, the <code>XcodeLogConfiguration</code> will be used in <code>synchronousMode</code>, which is not recommended for production code.</p>
</blockquote>

<p>The call above is also equivalent to:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="kt">XcodeLogConfiguration</span><span class="p">())</span>
</code></pre>
<a href='#rotatinglogfileconfiguration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='rotatinglogfileconfiguration'>RotatingLogFileConfiguration</h5>

<p>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/RotatingLogFileConfiguration.html"><code>RotatingLogFileConfiguration</code></a> can be used to maintain a directory of log files that are rotated daily.</p>

<blockquote>
<p><strong>Warning:</strong> The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/RotatingLogFileRecorder.html"><code>RotatingLogFileRecorder</code></a> created by the <code>RotatingLogFileConfiguration</code> assumes full control over the log directory.  Any file not recognized as an active log file will be deleted during the automatic pruning process, which may occur at any time. <em>This means if you’re not careful about the <code>directoryPath</code> you pass, you may lose valuable data!</em></p>
</blockquote>

<p>At a minimum, the <code>RotatingLogFileConfiguration</code> requires you to specify the <code>minimumSeverity</code> for logging, the number of days to keep log files, and a directory in which to store those files:</p>
<pre class="highlight swift"><code><span class="c1">// logDir is a String holding the filesystem path to the log directory</span>
<span class="k">let</span> <span class="nv">rotatingConf</span> <span class="o">=</span> <span class="kt">RotatingLogFileConfiguration</span><span class="p">(</span><span class="nv">minimumSeverity</span><span class="p">:</span> <span class="o">.</span><span class="kt">Info</span><span class="p">,</span>
                                                     <span class="nv">daysToKeep</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                                                  <span class="nv">directoryPath</span><span class="p">:</span> <span class="n">logDir</span><span class="p">)</span>

<span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">rotatingConf</span><span class="p">)</span>
</code></pre>

<p>The code above would record any log entry with a severity of <code>.Info</code> or higher in a file that would be kept for at least 7 days before being pruned. This particular configuration uses the <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/ReadableLogFormatter.html"><code>ReadableLogFormatter</code></a> to format log entries.</p>

<p>The <code>RotatingLogFileConfiguration</code> can also be used to specify <code>synchronousMode</code>, a set of <code>LogFilter</code>s to apply, and one or more custom <code>LogFormatter</code>s.</p>
<a href='#combining-configurations' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='combining-configurations'>Combining Configurations</h5>

<p>CleanroomLogger also supports passing multiple configurations. This allows you to combine the behavior of different configurations.</p>

<p>For example, to add a debug mode <code>XcodeLogConfiguration</code> to the <code>rotatingConf</code> declared above, you could write:</p>
<pre class="highlight swift"><code><span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="p">[</span><span class="kt">XcodeLogConfiguration</span><span class="p">(</span><span class="nv">debugMode</span><span class="p">:</span> <span class="kc">true</span><span class="p">),</span> <span class="n">rotatingConf</span><span class="p">])</span>
</code></pre>

<p>In this example, both the <code>XcodeLogConfiguration</code> and the <code>RotatingLogFileConfiguration</code> will be consulted as logging occurs. Because the <code>XcodeLogConfiguration</code> is declared with <code>debugMode: true</code>, it will operate in <code>synchronousMode</code> while <code>rotatingConf</code> will operate asynchronously.</p>
<a href='#implementing-your-own-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='implementing-your-own-configuration'>Implementing Your Own Configuration</h5>

<p>Although you can provide your own implementation of the <code>LogConfiguration</code> protocol, it may be simpler to create a <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/BasicLogConfiguration.html"><code>BasicLogConfiguration</code></a> instance and pass the relevant parameters to <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/BasicLogConfiguration.html#/s:FC15CleanroomLogger21BasicLogConfigurationcFMS0_FT15minimumSeverityOS_11LogSeverity7filtersGSaPS_9LogFilter__9recordersGSaPS_11LogRecorder__15synchronousModeSb14configurationsGSqGSaPS_16LogConfiguration____S0_">the initializer</a>.</p>

<p>You can also subclass <code>BasicLogConfiguration</code> if you’d like to encapsulate your configuration further.</p>
<a href='#a-complicated-example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='a-complicated-example'>A Complicated Example</h5>

<p>Let’s say you want CleanroomLogger to write to <code>stdout</code>, the Apple System Log (ASL) facility, and a set of rotating log files, and you want the log entries for each to be formatted differently:</p>

<ol>
<li>An <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/XcodeLogFormatter.html"><code>XcodeLogFormatter</code></a> for <code>stdout</code> but not the ASL</li>
<li>A <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/ReadableLogFormatter.html"><code>ReadableLogFormatter</code></a> for the ASL</li>
<li>A <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/ParsableLogFormatter.html"><code>ParsableLogFormatter</code></a> for writing to the rotating log files</li>
</ol>

<p>To configure CleanroomLogger in this fashion, you could write:</p>
<pre class="highlight swift"><code><span class="c1">// create 3 different types of formatters</span>
<span class="k">let</span> <span class="nv">xcodeFormat</span> <span class="o">=</span> <span class="kt">XcodeLogFormatter</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">aslFormat</span> <span class="o">=</span> <span class="kt">ReadableLogFormatter</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">fileFormat</span> <span class="o">=</span> <span class="kt">ParsableLogFormatter</span><span class="p">()</span>

<span class="c1">// create a configuration for logging to the Xcode console, but</span>
<span class="c1">// disable ASL logging so we can use a different formatter for it</span>
<span class="k">let</span> <span class="nv">xcodeConfig</span> <span class="o">=</span> <span class="kt">XcodeLogConfiguration</span><span class="p">(</span><span class="nv">logToASL</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                                       <span class="nv">formatter</span><span class="p">:</span> <span class="n">xcodeFormat</span><span class="p">)</span>

<span class="c1">// create a configuration containing an ASL log recorder</span>
<span class="c1">// using the aslFormat formatter. turn off stderr echoing</span>
<span class="c1">// so we don’t see duplicate messages in the Xcode console</span>
<span class="k">let</span> <span class="nv">aslRecorder</span> <span class="o">=</span> <span class="kt">ASLLogRecorder</span><span class="p">(</span><span class="nv">formatter</span><span class="p">:</span> <span class="n">aslFormat</span><span class="p">,</span>
                              <span class="nv">echoToStdErr</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">aslConfig</span> <span class="o">=</span> <span class="kt">BasicLogConfiguration</span><span class="p">(</span><span class="nv">recorders</span><span class="p">:</span> <span class="p">[</span><span class="n">aslRecorder</span><span class="p">])</span>

<span class="c1">// create a configuration for a rotating log file directory</span>
<span class="c1">// that uses the fileFormat formatter -- logDir is a String</span>
<span class="c1">// holding the filesystem path to the log directory</span>
<span class="k">let</span> <span class="nv">fileCfg</span> <span class="o">=</span> <span class="kt">RotatingLogFileConfiguration</span><span class="p">(</span><span class="nv">minimumSeverity</span><span class="p">:</span> <span class="o">.</span><span class="kt">Info</span><span class="p">,</span>
                                                <span class="nv">daysToKeep</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                                             <span class="nv">directoryPath</span><span class="p">:</span> <span class="n">logDir</span><span class="p">,</span>
                                                <span class="nv">formatters</span><span class="p">:</span> <span class="p">[</span><span class="n">fileFormat</span><span class="p">])</span>

<span class="c1">// crash if the log directory doesn’t exist yet &amp; can’t be created</span>
<span class="k">try!</span> <span class="n">fileCfg</span><span class="o">.</span><span class="nf">createLogDirectory</span><span class="p">()</span>

<span class="c1">// enable logging using the 3 different LogRecorders</span>
<span class="c1">// that each use their own distinct LogFormatter</span>
<span class="kt">Log</span><span class="o">.</span><span class="nf">enable</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="p">[</span><span class="n">xcodeConfig</span><span class="p">,</span> <span class="n">aslConfig</span><span class="p">,</span> <span class="n">fileCfg</span><span class="p">])</span>
</code></pre>
<a href='#customized-log-formatting' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='customized-log-formatting'>Customized Log Formatting</h4>

<p>The <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Protocols/LogFormatter.html"><code>LogFormatter</code></a> protocol is consulted when attempting to convert a <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Structs/LogEntry.html"><code>LogEntry</code></a> into a string.</p>

<p>CleanroomLogger ships with several high-level <code>LogFormatter</code> implementations for specific purposes:</p>

<ul>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/XcodeLogFormatter.html"><code>XcodeLogFormatter</code></a> — Used by the <code>XcodeLogConfiguration</code> by default.</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/ParsableLogFormatter.html"><code>ParsableLogFormatter</code></a> — Ideal for logs intended to be ingested for parsing by other processes.</li>
<li><a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/ReadableLogFormatter.html"><code>ReadableLogFormatter</code></a> — Ideal for logs intended to be read by humans.</li>
</ul>

<p>The <code>LogFormatter</code>s above are all subclasses of <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/StandardLogFormatter.html"><code>StandardLogFormatter</code></a>, which provides a basic mechanism for customizing the behavior of formatting.</p>

<p>You can also assemble an entirely custom formatter quite easily using the <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/FieldBasedLogFormatter.html"><code>FieldBasedLogFormatter</code></a>, which lets you mix and match <a href="https://rawgit.com/emaloney/CleanroomLogger/master/Documentation/API/Classes/FieldBasedLogFormatter/Field.html"><code>Fields</code></a> to roll your own formatter.</p>

<p>Let’s say you just wanted the following fields in your log output, each separated by a tab character:</p>

<ul>
<li>UNIX timestamp</li>
<li>Numeric severity level</li>
<li>Log message</li>
</ul>

<p>You could build such a formatter with the code:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">formatter</span> <span class="o">=</span> <span class="kt">FieldBasedLogFormatter</span><span class="p">(</span><span class="nv">fields</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="kt">Timestamp</span><span class="p">(</span><span class="o">.</span><span class="kt">UNIX</span><span class="p">),</span>
                                                <span class="o">.</span><span class="kt">Delimiter</span><span class="p">(</span><span class="o">.</span><span class="kt">Tab</span><span class="p">),</span>
                                                <span class="o">.</span><span class="kt">Severity</span><span class="p">(</span><span class="o">.</span><span class="kt">Numeric</span><span class="p">),</span>
                                                <span class="o">.</span><span class="kt">Delimiter</span><span class="p">(</span><span class="o">.</span><span class="kt">Tab</span><span class="p">),</span>
                                                <span class="o">.</span><span class="kt">Payload</span><span class="p">])</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>© 2015-2017 <a class="link" href="http://tech.gilt.com/" target="_blank" rel="external">Gilt Groupe</a></p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
